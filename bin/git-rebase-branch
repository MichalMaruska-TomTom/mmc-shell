#! /bin/bash -e

usage()
{
    cat <<EOF
${0##*/} [+-h] branch base [new-base]

EOF
}


while getopts :h OPT; do
    case $OPT in
	h|+h | *)
	    usage
	    exit 2
    esac
done
shift $(( OPTIND - 1 ))
OPTIND=1

if [ $# -lt 2 ]
then
    usage
    exit 1
fi
branch=$1
base=$2



if [ $# -gt 2 ]; then
    new_base=$3
    git rebase --onto $new_base $base $branch
else
    # note: the order vv
    git rebase $base $branch
fi
