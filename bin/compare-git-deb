#! /bin/bash

# Compare Git repository which carries a source debian package
# with what is released as a debian package.


DIR=$1

a=$(git describe --tags HEAD 2>/dev/null)

# path from $FOR_EACH_BASE_DIR

if [ 0 = $? ]; then
    post=$(expr match $a '^.*-\([[:digit:]]\+\)-[[:alnum:]]\+$')
#    echo $?
    if [ $? = 0 ];
    then
	#echo -n "$post "
	# (readlink -f $(pwd)/..)
	# $(basename $(readlink -f $DIR ))
	cecho red -n $DIR
	echo -e '\tis ' $post ' commits ahead release'
    else
	# $(basename $(readlink -f $(pwd)/..))

	echo -e $DIR  '\t' $a '\t' $version
    fi
fi



#	info=$(deb-pkg-installed-version)
#	version=$(echo $info|tail -n 1)

